<html>
    <style>
        *  {
            overflow: hidden;
        }

        #interactive_home_canvas {
            width: 100% !important;
            height: 100% !important;
            opacity: 0%;
        }
    </style>
    <script type="text/javascript">

        (function() {

            PIXI.settings.ANISOTROPIC_LEVEL = 6;
            PIXI.settings.FILTER_RESOLUTION = 2;
            PIXI.settings.RESOLUTION = 2;

            //------------------------------------------------------------
            //Canvas pre-load behaviour
            let window_width  = window.innerWidth;
            let window_height = window.innerHeight;
            let app_field, app_scene, app_time;
            let app_fade_rate = .02;
            const app = new PIXI.Application(window_width, window_height, {
                backgroundColor: 0x171733,
                antialias: true
            });
            
            $("#app_body").append(app.view);

            let asset_path = "assets/home/";

            //Load canvas assets
            PIXI.loader.add([
                asset_path + "planet_01.png",
                asset_path + "planet_02.png",
                asset_path + "planet_03.png",
                asset_path + "planet_04.png",
                asset_path + "planet_glow.png",
                asset_path + "planet_rim.png"
            ]).load(start);
            //------------------------------------------------------------

            //------------------------------------------------------------
            //Asset variables
            let planet_01, 
                planet_02, 
                planet_03, 
                planet_04, 
                planet_01_rim,
                planet_02_rim,
                planet_03_rim,
                planet_04_rim,
                planet_01_glow;
            //------------------------------------------------------------

            //Load assets function
            function load() {
                //glows
                planet_01_glow = PIXI_makeSprite(asset_path + "planet_glow.png", app_scene);

                //planets
                planet_01 = PIXI_makeSprite(asset_path + "planet_01.png", app_scene);
                planet_02 = PIXI_makeSprite(asset_path + "planet_02.png", app_scene);
                planet_03 = PIXI_makeSprite(asset_path + "planet_03.png", app_scene);
                planet_04 = PIXI_makeSprite(asset_path + "planet_04.png", app_scene);

                //rims
                planet_01_rim = PIXI_makeSprite(asset_path + "planet_rim.png", app_scene);
                planet_02_rim = PIXI_makeSprite(asset_path + "planet_rim.png", app_scene);
                planet_03_rim = PIXI_makeSprite(asset_path + "planet_rim.png", app_scene);
                planet_04_rim = PIXI_makeSprite(asset_path + "planet_rim.png", app_scene);

                setUp();
            }

            function setUp() {
                //refernece variables
                let planet_margin_factor = 7;
                let mid_planet_y_factor = 2.5;

                //planet 01
                planet_01.width  = 400;
                planet_01.height = 400;
                planet_01.x      = window_width / 2;
                planet_01.y      = window_height - 100;

                //planet 02
                planet_02.width  = 160;
                planet_02.height = 160;
                planet_02.x      = window_width / planet_margin_factor;
                planet_02.y      = window_height / mid_planet_y_factor;
                planet_02.alpha  = .8;
                planet_02.rotation = 1;

                //planet 03
                planet_03.width  = 160;
                planet_03.height = 160;
                planet_03.x      = window_width - (window_width / planet_margin_factor);
                planet_03.y      = window_height / mid_planet_y_factor;
                planet_03.alpha  = .8;
                planet_03.rotation = 3;

                //planet 04
                planet_04.width  = 100;
                planet_04.height = 100;
                planet_04.x      = window_width / 2;
                planet_04.y      = 100;
                planet_04.alpha  = .3;
                planet_04.rotation = 5;

                //planet 01 glow
                planet_01_glow.x      = planet_01.x;
                planet_01_glow.y      = planet_01.y;
                planet_01_glow.width  = 800;
                planet_01_glow.height = 800;
                planet_01_glow.alpha  = .35;

                //rim 01
                PIXI_copyTransform(planet_01, planet_01_rim);
                PIXI_copyTransform(planet_02, planet_02_rim);
                PIXI_copyTransform(planet_03, planet_03_rim);
                PIXI_copyTransform(planet_04, planet_04_rim);
            }

            //Start (setup) function
            function start() {
                app_time = 0;
                app_field = app.stage;
                app_scene = new PIXI.Container();
                app_field.addChild(app_scene);
                app.view.id = "interactive_home_canvas";
                app.view.setAttribute("scroll", "no");
                load(); 
                app.ticker.add(update);
            }

            //Update function
            function update(dt) {
                app_time += dt;

                //rotations
                planet_01.rotation += .0003;
                planet_02.rotation += .0004;
                planet_03.rotation += .0002;
                planet_04.rotation += .0005;

                //glows
                let glow_freq = .025;
                let glow_amp  = 1.15;
                let glow_diff = Math.sin(app_time * glow_freq) * glow_amp;
                planet_01_glow.height += glow_diff;
                planet_01_glow.width  += glow_diff;
                planet_01_glow.alpha = .35 + Math.sin(app_time * glow_freq) * .1;
            }

        })();
    
        app_log('Interactive Home page injected.', C_LOAD);
        
    </script>
</html>
